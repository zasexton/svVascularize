<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>svVascularize API Reference</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="style_api.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Shared top navigation -->
    <header class="topnav">
        <div class="container">
            <h1>svVascularize</h1>
            <nav>
                <a href="../index.html#about">About</a>
                <a href="../install.html">Installation</a>
                <a href="../doc.html">Documentation</a>
                <a href="#simulation">Simulation</a>
                <a href="https://pypi.org/project/svv/" target="_blank" rel="noopener">PyPI</a>
                <a href="https://github.com/SimVascular/svVascularize" target="_blank" rel="noopener">GitHub</a>
            </nav>
        </div>
    </header>

    <!-- Hero section for API Reference -->
    <section class="hero api-hero">
        <div class="container">
            <h2>svVascularize API</h2>
            <p>Complete reference for the <code>svv</code> module - classes, functions, and parameters</p>
            <div class="api-version-info">
                <span class="api-version-badge">v1.0.0</span>
                <span class="api-version-badge stable">stable</span>
            </div>
        </div>
    </section>

    <!-- Breadcrumbs -->
    <div class="container">
        <nav class="api-breadcrumbs">
            <a href="../doc.html">Documentation</a>
            <span class="separator">/</span>
            <span>API Reference</span>
        </nav>
    </div>

    <!-- Main API Documentation -->
    <div class="container api-container">
        <!-- Search Bar -->
        <div class="api-search-container">
            <i class="fas fa-search api-search-icon"></i>
            <input type="text" class="api-search-input" placeholder="Search modules, classes, functions...">
        </div>

        <!-- Quick Navigation Cards -->
        <div class="api-quick-nav">
            <div class="api-nav-card">
                <i class="fas fa-rocket"></i>
                <h3>Quick Start</h3>
                <p>Import and basic usage</p>
                <a href="../quickstart.html">Get Started →</a>
            </div>
            <div class="api-nav-card">
                <i class="fas fa-cube"></i>
                <h3>Core Modules</h3>
                <p>Domain, Tree, Forest</p>
                <a href="#modules">Browse Modules →</a>
            </div>
            <div class="api-nav-card">
                <i class="fas fa-code"></i>
                <h3>Examples</h3>
                <p>Code snippets and patterns</p>
                <a href="#examples">View Examples →</a>
            </div>
        </div>

        <!-- Quick Start Section
        <section id="quickstart" class="api-section">
            <h2>Quick Start</h2>
            <div class="callout tip">
                <strong>Installation:</strong> Install svVascularize via pip: <code>pip install svv</code>
            </div>

            <h3>Basic Import</h3>
            <pre data-copy><code class="language-python">import svv
from svv.domain import Domain
from svv.forest import Forest
from svv.tree import Tree
from svv.simulation import Simulation

# Create a domain
domain = Domain()

# Generate a vascular tree
tree = Tree(domain)
tree.generate()

# Run simulation
sim = Simulation(tree)
results = sim.run()</code></pre>
        </section> -->

        <!-- Module Documentation Grid -->
        <section id="modules" class="api-section">
            <h2>Module Reference</h2>

            <div class="api-grid">
                <!-- Sidebar Navigation -->
                <aside class="api-sidebar">
                    <div class="sidebar-section">
                        <h4 class="sidebar-title">Modules</h4>
                        <nav class="api-sidebar-nav">
                            <ul>
                                <li><a href="#module-domain" class="active"><i class="fas fa-cube"></i> svv.domain</a></li>
                                <li><a href="#module-forest"><i class="fas fa-tree"></i> svv.forest</a></li>
                                <li><a href="#module-tree"><i class="fas fa-code-branch"></i> svv.tree</a></li>
                                <li><a href="#module-simulation"><i class="fas fa-flask"></i> svv.simulation</a></li>
                                <li><a href="#module-utils"><i class="fas fa-tools"></i> svv.utils</a></li>
                                <li><a href="#module-visualize"><i class="fas fa-eye"></i> svv.visualize</a></li>
                            </ul>
                        </nav>
                    </div>
                </aside>

                <!-- Main Content Area -->
                <main class="api-main-content">
                    <!-- Domain Module -->
                    <article id="module-domain" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.domain</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Core domain functionality for defining computational domains and geometric operations.
                            Provides matrix operations, I/O capabilities, and solver implementations.
                        </p>

                        <div class="api-submodules">
                            <h4>Submodules</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Submodule</th>
                                        <th>Description</th>
                                        <th>Key Components</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>domain.core</code></td>
                                        <td>Core matrix operations</td>
                                        <td>a_matrix(), h_matrix(), m_matrix(), n_matrix()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.io</code></td>
                                        <td>Input/output operations</td>
                                        <td>read()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.kernel</code></td>
                                        <td>Kernel functions and coordinate transforms</td>
                                        <td>Kernel, cost(), cart2sph(), sph2cart()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.routines</code></td>
                                        <td>Computational routines</td>
                                        <td>allocate(), contour(), tetrahedralize(), boolean()</td>
                                    </tr>
                                    <tr>
                                        <td><code>domain.solver</code></td>
                                        <td>Domain-specific solvers</td>
                                        <td>Solver class</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="api-classes">
                            <h4>Main Classes</h4>
                            <ul class="api-class-list">
                                <li>
                                    <a href="domain.html"><code>Domain</code></a> - Main domain class for defining spatial regions
                                </li>
                                <li>
                                    <a href="patch.html"><code>Patch</code></a> - Individual patches for RBF interpolation
                                </li>
                            </ul>
                        </div>
                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.domain import Domain

# Create a domain from a mesh
import pyvista as pv
mesh = pv.read('tissue_geometry.stl')
domain = Domain(mesh)

# Build implicit function
domain.create()
domain.solve()
domain.build()

# Export domain
boundary, _ = domain.get_boundary(resolution=30)</code></pre>
                        </div>

                        <div class="admonition note">
                            <p><strong>Performance Note:</strong> The domain.routines module includes Cython-optimized functions (<code>c_allocate.pyx</code>, <code>c_sample.pyx</code>) for enhanced performance.</p>
                        </div>
                    </article>

                    <!-- Forest Module -->
                    <article id="module-forest" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.forest</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Forest structures for managing collections of vascular trees and their interconnections.
                            Supports various connection algorithms and export formats.
                        </p>

                        <div class="api-submodules">
                            <h4>Connection Methods</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Description</th>
                                        <th>Use Case</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>ForestConnection</code></td>
                                        <td>High-level connection manager</td>
                                        <td>Builds connections for each network</td>
                                    </tr>
                                    <tr>
                                        <td><code>TreeConnection</code></td>
                                        <td>Per-network connection solver</td>
                                        <td>Assigns and optimizes tree-to-tree links</td>
                                    </tr>
                                    <tr>
                                        <td><code>VesselConnection</code></td>
                                        <td>Single connection optimizer</td>
                                        <td>Generates connecting vessel segments</td>
                                    </tr>
                                    <tr>
                                        <td><code>Curve</code></td>
                                        <td>Curve factory</td>
                                        <td>Supports Bezier, Catmull-Rom, and NURBS shapes</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="api-classes">
                            <h4>Main Classes</h4>
                            <ul class="api-class-list">
                                <li>
                                    <a href="forest.html"><code>Forest</code></a> - Main class for building connected vascular structures.
                                </li>
                            </ul>
                        </div>
                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">import pyvista as pv
from svv.domain import Domain
from svv.forest import Forest

# Prepare a domain and build its implicit representation
domain = Domain(pv.Cube())
domain.create()
domain.solve()
domain.build()

# Initialize a forest with two trees in one network
trees_per_network = [2]
forest = Forest(domain=domain, n_networks=1, n_trees_per_network=trees_per_network)
forest.set_domain(domain)
forest.set_roots()  # Randomize root placement
forest.add(50)      # Grow 50 vessels per tree

# Connect the trees (starting with cubic curves)
forest.connect(3)

# Export watertight solids for downstream simulation or fabrication
forest.export_solid(outdir='forest_model')</code></pre>
                        </div>
                    </article>

                    <!-- Tree Module -->
                    <article id="module-tree" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.tree</code></h3>
                            <span class="api-module-badge">Core Module</span>
                        </header>

                        <p class="api-module-description">
                            Tree structures and algorithms for vascular tree generation, manipulation, and analysis.
                            Includes branching logic, collision detection, and optimization utilities.
                        </p>

                        <div class="api-submodules">
                            <h4>Key Classes</h4>
                            <table class="api-table">
                                <thead>
                                    <tr>
                                        <th>Class</th>
                                        <th>Module</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>Tree</code></td>
                                        <td>tree</td>
                                        <td>Main tree structure</td>
                                    </tr>
                                    <tr>
                                        <td><code>Bifurcation</code></td>
                                        <td>tree.branch</td>
                                        <td>Bifurcation point management</td>
                                    </tr>
                                    <tr>
                                        <td><code>TreeManager</code></td>
                                        <td>tree.utils</td>
                                        <td>Tree lifecycle management</td>
                                    </tr>
                                    <tr>
                                        <td><code>TreeCollision</code></td>
                                        <td>tree.collision</td>
                                        <td>Collision detection</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="api-classes">
                            <h4>Main Classes</h4>
                            <ul class="api-class-list">
                                <li>
                                    <a href="tree.html"><code>Tree</code></a> - Main class for building bifurcating vascular structures
                                </li>
                            </ul>
                        </div>
                        <div class="admonition note">
                            <p><strong>Performance note:</strong> The tree.utils module contains several Cython-optimized functions (<code>c_angle</code>, <code>c_basis</code>, <code>c_close</code>, <code>c_extend</code>, <code>c_local_optimize</code>, <code>c_obb</code>, <code>c_update</code>) for performance-critical operations.</p>
                        </div>
                    </article>


                    <!-- Simulation Module -->
                    <article id="module-simulation" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.simulation</code></h3>
                            <span class="api-module-badge">Simulation</span>
                        </header>

                        <p class="api-module-description">
                            Comprehensive simulation framework for fluid dynamics and hemodynamic modeling.
                            Supports both 0D and 1D reduced-order models.
                        </p>

                        <div class="api-submodules">
                            <h4>Simulation Types</h4>
                            <div class="api-cards">
                                <div class="api-card">
                                    <h5>0D Models</h5>
                                    <p>Lumped parameter models for rapid system-level analysis</p>
                                    <ul>
                                        <li><code>zerod_forest</code></li>
                                        <li><code>zerod_tree</code></li>
                                        <li><code>project_solution</code></li>
                                    </ul>
                                </div>
                                <div class="api-card">
                                    <h5>1D Models</h5>
                                    <p>One-dimensional flow models for detailed hemodynamics</p>
                                    <ul>
                                        <li><code>centerlines</code></li>
                                        <li><code>generate_1d_mesh</code></li>
                                        <li><code>parameters</code></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.simulation import Simulation
from svv.simulation.fluid.rom.zero_d.zerod_tree import export_0d_simulation

# Wrap a generated tree in a Simulation container
sim = Simulation(tree, name='example_sim')

# Build CFD-ready meshes and identify boundary faces
sim.build_meshes(fluid=True, tissue=False, boundary_layer=True)
sim.extract_faces(crease_angle=60.0)

# Construct and write an svFSI configuration
sim.construct_3d_fluid_simulation()
sim.write_3d_fluid_simulation()

# Export a matching 0D model for fast hemodynamic studies
export_0d_simulation(tree, outdir='tree_0d')</code></pre>
                        </div>
                    </article>

                    <!-- Utils Module -->
                    <article id="module-utils" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.utils</code></h3>
                            <span class="api-module-badge">Utilities</span>
                        </header>

                        <p class="api-module-description">
                            Utility functions for mesh operations, spatial calculations, and cross-platform support.
                        </p>

                        <div class="callout warning">
                            <strong>Platform Support:</strong> The remeshing module includes platform-specific MMG binaries for Linux, macOS, and Windows. Ensure you have the correct binary for your system.
                        </div>

                        <div class="api-submodules">
                            <h4>Available Utilities</h4>
                            <ul>
                                <li><code>remeshing.remesh_surface()</code> - Remesh surface meshes with MMG</li>
                                <li><code>remeshing.remesh_volume()</code> - Volume remeshing helpers</li>
                                <li><code>spatial.minimum_segment_distance()</code> - Pairwise vessel distance checks</li>
                                <li><code>spatial.minimum_self_segment_distance()</code> - Self-collision distance utility</li>
                            </ul>
                        </div>
                    </article>

                    <!-- Visualize Module -->
                    <article id="module-visualize" class="api-module">
                        <header class="api-module-header">
                            <h3><code>svv.visualize</code></h3>
                            <span class="api-module-badge">Visualization</span>
                        </header>

                        <p class="api-module-description">
                            Visualization tools for rendering vascular trees and forests.
                        </p>

                        <div class="api-example">
                            <h4>Example Usage</h4>
                            <pre data-copy><code class="language-python">from svv.visualize.tree.show import show as show_tree
from svv.visualize.forest.show import show as show_forest

# Visualize a single tree with the enclosing domain
show_tree(tree, color='crimson', plot_domain=True)

# Visualize an entire forest and save a screenshot
plotter = show_forest(forest, colors=['red', 'royalblue'], plot_domain=True, return_plotter=True)
plotter.screenshot('forest_viz.png')</code></pre>
                        </div>
                    </article>
                </main>

                <!-- Right Sidebar - On This Page -->
                <aside class="api-toc-sidebar">
                    <div class="sidebar-section">
                        <h4 class="sidebar-title">On This Page</h4>
                        <nav id="local-toc" class="api-local-toc">
                            <!-- Auto-populated by JavaScript -->
                        </nav>
                    </div>
                </aside>
            </div>
        </section>

        <!-- Examples Section -->
        <section id="examples" class="api-section">
            <h2>Common Examples</h2>

            <div class="api-example-grid">
                <div class="api-example-card">
                    <h3>Generate a Vascular Tree</h3>
                    <pre data-copy><code class="language-python">import pyvista as pv
from svv.domain import Domain
from svv.tree import Tree

domain = Domain(pv.Cube())
domain.create()
domain.solve()
domain.build()

tree = Tree()
tree.set_domain(domain)
tree.set_root()
tree.n_add(100)

# Export watertight geometry for printing or meshing
tree.export_solid(outdir='vascular_tree')</code></pre>
                </div>

                <div class="api-example-card">
                    <h3>Run 0D Simulation</h3>
                    <pre data-copy><code class="language-python">from svv.simulation.fluid.rom.zero_d.zerod_tree import export_0d_simulation

export_0d_simulation(tree, outdir='tree_0d', steady=True)</code></pre>
                </div>
            </div>
        </section>

        <!-- API Conventions -->
        <section class="api-section">
            <h2>API Conventions</h2>

            <div class="api-conventions-grid">
                <div class="convention-block">
                    <h3>Naming Conventions</h3>
                    <ul>
                        <li><strong>Classes:</strong> PascalCase (e.g., <code>TreeManager</code>)</li>
                        <li><strong>Functions:</strong> snake_case (e.g., <code>export_solid()</code>)</li>
                        <li><strong>Constants:</strong> UPPER_CASE (e.g., <code>DEFAULT_VISCOSITY</code>)</li>
                        <li><strong>Private:</strong> Leading underscore (e.g., <code>_internal_method()</code>)</li>
                    </ul>
                </div>

                <div class="convention-block">
                    <h3>Units</h3>
                    <ul>
                        <li><strong>Length:</strong> millimeters (mm)</li>
                        <li><strong>Time:</strong> seconds (s)</li>
                        <li><strong>Pressure:</strong> mmHg or Pa</li>
                        <li><strong>Flow:</strong> mL/s</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 SimVascular, Stanford University, The Regents of the University of California, and others –
            <a href="https://opensource.org/license/BSD-3-Clause">BSD 3-Clause License</a><br></p>
        </div>
    </footer>

    <!-- Load Scripts -->
    <script defer src="../script.js"></script>
    <script defer src="script_api.js"></script>
</body>
</html>
